###
# Solid Hello World table components 
# Based on the helloWorld.ttl and ui-components developed by Jeff Zucker
# Remark: make sure to replace the SPARQL endpoint if you change the Turtle data location
###

@prefix ui: <https://www.w3.org/ns/ui#> .

###
# Overview table about Example Applications
###

<#ExamplesTable>
  ui:template ui:Table ;
  ui:dataSource [
    a ui:SparqlQuery ;
    ui:endpoint </data/helloWorld.ttl> ;
    ui:query """
      PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
      SELECT ?AppName ?Description 
             (GROUP_CONCAT(DISTINCT ?UseCaseName;separator=", ") AS ?UseCase) 
             (GROUP_CONCAT(DISTINCT ?CodeName;separator=", ") AS ?CodeStack) 
             ?LinkToDemo ?LinkToRepo ?LinkToTutorial WHERE {
        ?app skos:prefLabel ?AppName .
        ?app skos:definition ?Description .
        ?app <https://timea.solidcommunity.net/HelloWorld/data/SolidHelloWorldOntology#linkToDemo> ?LinkToDemo .
        ?app <https://timea.solidcommunity.net/HelloWorld/data/SolidHelloWorldOntology#linkToRepo> ?LinkToRepo .
        OPTIONAL {
          ?app <https://timea.solidcommunity.net/HelloWorld/data/SolidHelloWorldOntology#linkToTutorial> ?LinkToTutorial .
        }
        ?app <https://timea.solidcommunity.net/HelloWorld/data/SolidHelloWorldOntology#showcasesUseCase> ?useCase .
        ?useCase skos:prefLabel ?UseCaseName .
        ?app <https://timea.solidcommunity.net/HelloWorld/data/SolidHelloWorldOntology#usesCodeStack> ?code .
        ?code skos:prefLabel ?CodeName .
      } 
      GROUP BY ?AppName ?Description ?LinkToDemo ?LinkToRepo ?LinkToTutorial
      ORDER BY ?AppName 
    """
  ] ;
  ui:template [
      a ui:Template ;
      ui:recurring """
      
      <tr><td class="first-column"> ${AppName} </td>
          <td> ${Description} </td>
          <td> ${UseCase} </td>
          <td> ${CodeStack} </td>
          <td><a href="${LinkToDemo}" target="_blank"> ${LinkToDemo} </a></td>
          <td><a href="${LinkToRepo}" target="_blank"> ${LinkToRepo} </a></td>
      </tr>

      """;
  ui:before """
      <table>
          <tr><th class="first-column"> Application name </th>
              <th> Description </th>
              <th> Use case </th>
              <th> Code stack </th>
              <th> Link to demo </th>
              <th> Link to repo </th>
              
          </tr>
    """;
  ui:after """
      </table>
  """
  ] .